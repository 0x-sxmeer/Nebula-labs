
> nebula-labs@0.0.0 test
> vitest run


[7m[1m[36m RUN [39m[22m[27m [36mv1.6.1[39m [90mC:/DAPP/SWAP/blackbox dapp[39m

 [32mΓ£ô[39m src/utils/__tests__/validation.test.js [2m ([22m[2m31 tests[22m[2m)[22m[90m 14[2mms[22m[39m
[90mstdout[2m | new LiFiService (C:\DAPP\SWAP\blackbox dapp\src\services\lifiService.js:103:13)[22m[39m
≡ƒÜÇ LiFi Service using endpoint: /api/lifi-proxy

[90mstdout[2m | new LiFiService (C:\DAPP\SWAP\blackbox dapp\src\services\lifiService.js:103:13)[22m[39m
≡ƒÜÇ LiFi Service using endpoint: /api/lifi-proxy

[90mstdout[2m | src/services/__tests__/lifiService.test.js[2m > [22m[2mlifiService[2m > [22m[2mgetRoutes[2m > [22m[2mshould fetch routes successfully[22m[39m
≡ƒôí Fetching routes: {
  fromChainId: [33m1[39m,
  fromTokenAddress: [32m'0xETH'[39m,
  fromAddress: [32m'0xUser'[39m,
  fromAmount: [32m'1000000000000000000'[39m,
  toChainId: [33m137[39m,
  toTokenAddress: [32m'0xMATIC'[39m,
  toAddress: [32m'0xUser'[39m,
  options: {
    order: [32m'FASTEST'[39m,
    slippage: [33m0.03[39m,
    maxPriceImpact: [33m1[39m,
    allowSwitchChain: [33mtrue[39m,
    integrator: [32m'blackbox_dapp'[39m
  },
  originalAmount: [32m'1'[39m
}
Γ£à Found 1 routes

node.exe : 
[90mstderr[2m | src
/services/__tests__/l
ifiService.test.js[2
m > [22m[2mlifiServ
ice[2m > [22m[2mge
tStatus[2m > 
[22m[2mshould 
return 
status[22m[39m
At C:\Program Files\n
odejs\npm.ps1:29 
char:3
+   & $NODE_EXE 
$NPM_CLI_JS $args
+   ~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~
    + CategoryInfo   
           : NotSpe  
  cified: ([90mst   
 derr[2m...tatus    
[22m[39m:Strin    
g) [], RemoteExc    
eption
    + FullyQualified 
   ErrorId : Native  
  CommandError
 
Attempt 1/4 failed 
for /status?txHash=0x
TxHash&bridge=bridge&
fromChain=1&toChain=1
37: TypeError: 
response.text is not 
a function
    at LiFiService.ma
keRequest [90m(C:\DA
PP\SWAP\blackbox dapp
\[39msrc\services\li
fiService.js:260:45[
90m)[39m
    at LiFiService.ge
tStatus [90m(C:\DAPP
\SWAP\blackbox dapp\
[39msrc\services\lifi
Service.js:585:20[90
m)[39m
    at [90mC:\DAPP\S
WAP\blackbox dapp\[3
9msrc\services\__test
s__\lifiService.test.
js:55:22
    at runTest [90m(
file:///C:/DAPP/SWAP/
blackbox%20dapp/[39m
node_modules/[4m@vit
est[24m/runner/dist/
index.js:781:11[90m)
[39m
    at runSuite [90m
(file:///C:/DAPP/SWAP
/blackbox%20dapp/[39
mnode_modules/[4m@vi
test[24m/runner/dist
/index.js:909:15[90m
)[39m
    at runSuite [90m
(file:///C:/DAPP/SWAP
/blackbox%20dapp/[39
mnode_modules/[4m@vi
test[24m/runner/dist
/index.js:909:15[90m
)[39m
    at runSuite [90m
(file:///C:/DAPP/SWAP
/blackbox%20dapp/[39
mnode_modules/[4m@vi
test[24m/runner/dist
/index.js:909:15[90m
)[39m
    at runFiles [90m
(file:///C:/DAPP/SWAP
/blackbox%20dapp/[39
mnode_modules/[4m@vi
test[24m/runner/dist
/index.js:958:5[90m)
[39m
    at startTests [9
0m(file:///C:/DAPP/SW
AP/blackbox%20dapp/[
39mnode_modules/[4m@
vitest[24m/runner/di
st/index.js:967:3[90
m)[39m
    at [90mfile:///C
:/DAPP/SWAP/blackbox%
20dapp/[39mnode_modu
les/[4mvitest[24m/d
ist/chunks/runtime-ru
nBaseTests.oAvMKtQC.j
s:116:7

 [32mΓ£ô[39m src/__tests__/swapAmounts.test.js [2m ([22m[2m2 tests[22m[2m)[22m[90m 8[2mms[22m[39m
 [32mΓ£ô[39m src/hooks/__tests__/useTokenApproval.test.js [2m ([22m[2m5 tests[22m[2m)[22m[90m 36[2mms[22m[39m
[90mstderr[2m | src
/hooks/__tests__/useS
wapExecution.test.js
[2m > [22m[2museSwa
pExecution - Logic 
Security[2m > 
[22m[2mshould 
throw "Approval 
required" if ERC20 
token is not 
approved[22m[39m
Warning: An update 
to TestComponent 
inside a test was 
not wrapped in 
act(...).

When testing, code 
that causes React 
state updates should 
be wrapped into 
act(...):

act(() => {
  /* fire events 
that update state */
});
/* assert on the 
output */

This ensures that 
you're testing the 
behavior the user 
would see in the 
browser. Learn more 
at https://reactjs.or
g/link/wrap-tests-wit
h-act
    at TestComponent 
(C:\DAPP\SWAP\blackbo
x dapp\node_modules\@
testing-library\react
\dist\pure.js:307:5)
Warning: An update 
to TestComponent 
inside a test was 
not wrapped in 
act(...).

When testing, code 
that causes React 
state updates should 
be wrapped into 
act(...):

act(() => {
  /* fire events 
that update state */
});
/* assert on the 
output */

This ensures that 
you're testing the 
behavior the user 
would see in the 
browser. Learn more 
at https://reactjs.or
g/link/wrap-tests-wit
h-act
    at TestComponent 
(C:\DAPP\SWAP\blackbo
x dapp\node_modules\@
testing-library\react
\dist\pure.js:307:5)

[90mstderr[2m | src
/hooks/__tests__/useS
wapExecution.test.js
[2m > [22m[2museSwa
pExecution - Logic 
Security[2m > 
[22m[2mshould NOT 
throw "Approval 
required" for Native 
Token (ETH)[22m[39m
Warning: An update 
to TestComponent 
inside a test was 
not wrapped in 
act(...).

When testing, code 
that causes React 
state updates should 
be wrapped into 
act(...):

act(() => {
  /* fire events 
that update state */
});
/* assert on the 
output */

This ensures that 
you're testing the 
behavior the user 
would see in the 
browser. Learn more 
at https://reactjs.or
g/link/wrap-tests-wit
h-act
    at TestComponent 
(C:\DAPP\SWAP\blackbo
x dapp\node_modules\@
testing-library\react
\dist\pure.js:307:5)
Warning: An update 
to TestComponent 
inside a test was 
not wrapped in 
act(...).

When testing, code 
that causes React 
state updates should 
be wrapped into 
act(...):

act(() => {
  /* fire events 
that update state */
});
/* assert on the 
output */

This ensures that 
you're testing the 
behavior the user 
would see in the 
browser. Learn more 
at https://reactjs.or
g/link/wrap-tests-wit
h-act
    at TestComponent 
(C:\DAPP\SWAP\blackbo
x dapp\node_modules\@
testing-library\react
\dist\pure.js:307:5)

 [32mΓ£ô[39m src/services/__tests__/lifiService.test.js [2m ([22m[2m3 tests[22m[2m)[22m[33m 1029[2mms[22m[39m
 [33mΓ¥»[39m src/hooks/__tests__/useSwap.test.js [2m ([22m[2m0 test[22m[2m)[22m
[90mstderr[2m | src
/hooks/__tests__/useS
wapExecution.test.js
[2m > [22m[2museSwa
pExecution - Logic 
Security[2m > 
[22m[2mshould NOT 
throw "Approval 
required" for Native 
Token (ETH)[22m[39m
Warning: An update 
to TestComponent 
inside a test was 
not wrapped in 
act(...).

When testing, code 
that causes React 
state updates should 
be wrapped into 
act(...):

act(() => {
  /* fire events 
that update state */
});
/* assert on the 
output */

This ensures that 
you're testing the 
behavior the user 
would see in the 
browser. Learn more 
at https://reactjs.or
g/link/wrap-tests-wit
h-act
    at TestComponent 
(C:\DAPP\SWAP\blackbo
x dapp\node_modules\@
testing-library\react
\dist\pure.js:307:5)
Warning: An update 
to TestComponent 
inside a test was 
not wrapped in 
act(...).

When testing, code 
that causes React 
state updates should 
be wrapped into 
act(...):

act(() => {
  /* fire events 
that update state */
});
/* assert on the 
output */

This ensures that 
you're testing the 
behavior the user 
would see in the 
browser. Learn more 
at https://reactjs.or
g/link/wrap-tests-wit
h-act
    at TestComponent 
(C:\DAPP\SWAP\blackbo
x dapp\node_modules\@
testing-library\react
\dist\pure.js:307:5)
Warning: An update 
to TestComponent 
inside a test was 
not wrapped in 
act(...).

When testing, code 
that causes React 
state updates should 
be wrapped into 
act(...):

act(() => {
  /* fire events 
that update state */
});
/* assert on the 
output */

This ensures that 
you're testing the 
behavior the user 
would see in the 
browser. Learn more 
at https://reactjs.or
g/link/wrap-tests-wit
h-act
    at TestComponent 
(C:\DAPP\SWAP\blackbo
x dapp\node_modules\@
testing-library\react
\dist\pure.js:307:5)

[90mstderr[2m | src
/hooks/__tests__/useS
wapExecution.test.js
[2m > [22m[2museSwa
pExecution - Logic 
Security[2m > 
[22m[2mshould pass 
validation if ERC20 
token IS 
approved[22m[39m
Warning: An update 
to TestComponent 
inside a test was 
not wrapped in 
act(...).

When testing, code 
that causes React 
state updates should 
be wrapped into 
act(...):

act(() => {
  /* fire events 
that update state */
});
/* assert on the 
output */

This ensures that 
you're testing the 
behavior the user 
would see in the 
browser. Learn more 
at https://reactjs.or
g/link/wrap-tests-wit
h-act
    at TestComponent 
(C:\DAPP\SWAP\blackbo
x dapp\node_modules\@
testing-library\react
\dist\pure.js:307:5)
Warning: An update 
to TestComponent 
inside a test was 
not wrapped in 
act(...).

When testing, code 
that causes React 
state updates should 
be wrapped into 
act(...):

act(() => {
  /* fire events 
that update state */
});
/* assert on the 
output */

This ensures that 
you're testing the 
behavior the user 
would see in the 
browser. Learn more 
at https://reactjs.or
g/link/wrap-tests-wit
h-act
    at TestComponent 
(C:\DAPP\SWAP\blackbo
x dapp\node_modules\@
testing-library\react
\dist\pure.js:307:5)

[90mstderr[2m | src
/hooks/__tests__/useS
wapExecution.test.js
[2m > [22m[2museSwa
pExecution - Logic 
Security[2m > 
[22m[2mshould pass 
validation if ERC20 
token IS 
approved[22m[39m
Warning: An update 
to TestComponent 
inside a test was 
not wrapped in 
act(...).

When testing, code 
that causes React 
state updates should 
be wrapped into 
act(...):

act(() => {
  /* fire events 
that update state */
});
/* assert on the 
output */

This ensures that 
you're testing the 
behavior the user 
would see in the 
browser. Learn more 
at https://reactjs.or
g/link/wrap-tests-wit
h-act
    at TestComponent 
(C:\DAPP\SWAP\blackbo
x dapp\node_modules\@
testing-library\react
\dist\pure.js:307:5)
Warning: An update 
to TestComponent 
inside a test was 
not wrapped in 
act(...).

When testing, code 
that causes React 
state updates should 
be wrapped into 
act(...):

act(() => {
  /* fire events 
that update state */
});
/* assert on the 
output */

This ensures that 
you're testing the 
behavior the user 
would see in the 
browser. Learn more 
at https://reactjs.or
g/link/wrap-tests-wit
h-act
    at TestComponent 
(C:\DAPP\SWAP\blackbo
x dapp\node_modules\@
testing-library\react
\dist\pure.js:307:5)
Warning: An update 
to TestComponent 
inside a test was 
not wrapped in 
act(...).

When testing, code 
that causes React 
state updates should 
be wrapped into 
act(...):

act(() => {
  /* fire events 
that update state */
});
/* assert on the 
output */

This ensures that 
you're testing the 
behavior the user 
would see in the 
browser. Learn more 
at https://reactjs.or
g/link/wrap-tests-wit
h-act
    at TestComponent 
(C:\DAPP\SWAP\blackbo
x dapp\node_modules\@
testing-library\react
\dist\pure.js:307:5)

[90mstderr[2m | src
/hooks/__tests__/useS
wapExecution.test.js
[2m > [22m[2museSwa
pExecution - 
Freshness 
Validation[2m > 
[22m[2mshould 
allow 55s old route 
for initial check 
(limit 60s) but fail 
pre-send (limit 
45s)[22m[39m
Warning: An update 
to TestComponent 
inside a test was 
not wrapped in 
act(...).

When testing, code 
that causes React 
state updates should 
be wrapped into 
act(...):

act(() => {
  /* fire events 
that update state */
});
/* assert on the 
output */

This ensures that 
you're testing the 
behavior the user 
would see in the 
browser. Learn more 
at https://reactjs.or
g/link/wrap-tests-wit
h-act
    at TestComponent 
(C:\DAPP\SWAP\blackbo
x dapp\node_modules\@
testing-library\react
\dist\pure.js:307:5)
Warning: An update 
to TestComponent 
inside a test was 
not wrapped in 
act(...).

When testing, code 
that causes React 
state updates should 
be wrapped into 
act(...):

act(() => {
  /* fire events 
that update state */
});
/* assert on the 
output */

This ensures that 
you're testing the 
behavior the user 
would see in the 
browser. Learn more 
at https://reactjs.or
g/link/wrap-tests-wit
h-act
    at TestComponent 
(C:\DAPP\SWAP\blackbo
x dapp\node_modules\@
testing-library\react
\dist\pure.js:307:5)

[90mstderr[2m | src
/hooks/__tests__/useS
wapExecution.test.js
[2m > [22m[2museSwa
pExecution - 
Freshness 
Validation[2m > 
[22m[2mshould 
allow 55s old route 
for initial check 
(limit 60s) but fail 
pre-send (limit 
45s)[22m[39m
Warning: An update 
to TestComponent 
inside a test was 
not wrapped in 
act(...).

When testing, code 
that causes React 
state updates should 
be wrapped into 
act(...):

act(() => {
  /* fire events 
that update state */
});
/* assert on the 
output */

This ensures that 
you're testing the 
behavior the user 
would see in the 
browser. Learn more 
at https://reactjs.or
g/link/wrap-tests-wit
h-act
    at TestComponent 
(C:\DAPP\SWAP\blackbo
x dapp\node_modules\@
testing-library\react
\dist\pure.js:307:5)
Warning: An update 
to TestComponent 
inside a test was 
not wrapped in 
act(...).

When testing, code 
that causes React 
state updates should 
be wrapped into 
act(...):

act(() => {
  /* fire events 
that update state */
});
/* assert on the 
output */

This ensures that 
you're testing the 
behavior the user 
would see in the 
browser. Learn more 
at https://reactjs.or
g/link/wrap-tests-wit
h-act
    at TestComponent 
(C:\DAPP\SWAP\blackbo
x dapp\node_modules\@
testing-library\react
\dist\pure.js:307:5)
Warning: An update 
to TestComponent 
inside a test was 
not wrapped in 
act(...).

When testing, code 
that causes React 
state updates should 
be wrapped into 
act(...):

act(() => {
  /* fire events 
that update state */
});
/* assert on the 
output */

This ensures that 
you're testing the 
behavior the user 
would see in the 
browser. Learn more 
at https://reactjs.or
g/link/wrap-tests-wit
h-act
    at TestComponent 
(C:\DAPP\SWAP\blackbo
x dapp\node_modules\@
testing-library\react
\dist\pure.js:307:5)
Warning: An update 
to TestComponent 
inside a test was 
not wrapped in 
act(...).

When testing, code 
that causes React 
state updates should 
be wrapped into 
act(...):

act(() => {
  /* fire events 
that update state */
});
/* assert on the 
output */

This ensures that 
you're testing the 
behavior the user 
would see in the 
browser. Learn more 
at https://reactjs.or
g/link/wrap-tests-wit
h-act
    at TestComponent 
(C:\DAPP\SWAP\blackbo
x dapp\node_modules\@
testing-library\react
\dist\pure.js:307:5)

 [32mΓ£ô[39m src/hooks/__tests__/useSwapExecution.test.js [2m ([22m[2m4 tests[22m[2m)[22m[33m 4569[2mms[22m[39m

[31mΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»Γ
Ä»[1m[7m Failed 
Suites 1 [27m[22mΓÄ
»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»[
39m

[31m[1m[7m FAIL 
[27m[22m[39m src/h
ooks/__tests__/useSwa
p.test.js [2m[ src/h
ooks/__tests__/useSwa
p.test.js ][22m
[31m[1mError[22m: 
[vitest] No 
"fallback" export is 
defined on the 
"wagmi" mock. Did 
you forget to return 
it from "vi.mock"?
If you need to 
partially mock a 
module, you can use 
"importOriginal" 
helper inside:
[39m
vi[33m.[39m[34mmoc
k[39m([32m"wagmi"[
39m[33m,[39m 
[35masync[39m 
(importOriginal) 
[33m=>[39m {
  [35mconst[39m 
actual [33m=[39m 
[35mawait[39m [34m
importOriginal[39m()
  [35mreturn[39m {
    [33m...[39mactu
al[33m,[39m
    [90m// your 
mocked methods[39m
  }
})

[36m [2mΓ¥»[22m sr
c/config/wagmi.config
.js:[2m38:19[22m[3
9m
    [90m 36| [39m  
[90m// Γ£à CRITICAL 
FIX: Resilient RPC 
Strategy (Multiple 
Fallbacks)[39m
    [90m 37| [39m  
transports[33m:[39m
 {
    [90m 38| [39m  
  [mainnet[33m.[39m
id][33m:[39m 
[34mfallback[39m([
    [90m   | [39m  
                
[31m^[39m
    [90m 39| [39m  
    [34mhttp[39m([
32m'https://cloudflar
e-eth.com'[39m)[33m
,[39m
    [90m 40| [39m  
    [34mhttp[39m([
32m'https://rpc.ankr.
com/eth'[39m)[33m,
[39m
[90m [2mΓ¥»[22m sr
c/hooks/useSwap.js:[
2m8:31[22m[39m

[31m[2mΓÄ»ΓÄ»ΓÄ»ΓÄ»
ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»
ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»
ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»[1/
1]ΓÄ»[22m[39m

[2m Test Files [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m5 passed[39m[22m[90m (6)[39m
[2m      Tests [22m [1m[32m45 passed[39m[22m[90m (45)[39m
[2m   Start at [22m 17:33:59
[2m   Duration [22m 7.56s[2m (transform 660ms, setup 5.67s, collect 2.08s, tests 5.66s, environment 3.67s, prepare 2.65s)[22m

